---
import { getCollection, type CollectionEntry } from "astro:content";
import ProjectShowcase from "@astro/projects/ProjectShowcase.astro";

const allProjects = await getCollection("projects");
type ProjectEntry = CollectionEntry<"projects">;
const topProjects: ProjectEntry[] = allProjects
  .filter((project: ProjectEntry) => !project.data.draft)
  .sort((a: ProjectEntry, b: ProjectEntry) => {
    const rankingA = parseInt(a.data.ProjectRanking || "9999", 10);
    const rankingB = parseInt(b.data.ProjectRanking || "9999", 10);
    return rankingA - rankingB;
  })
  .slice(0, 6);
---

<ProjectShowcase
  projects={topProjects}
  title="Featured Projects"
  subtitle="A high-signal selection of builds where strategy, polish, and measurable outcomes align."
  eyebrow="Selected Work"
  showViewAll={true}
  viewAllHref="/project"
  viewAllLabel="View All Projects"
/>
